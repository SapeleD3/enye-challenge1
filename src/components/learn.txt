import React, { useState } from "react";

import Grid from "@material-ui/core/Grid";
import Typography from "@material-ui/core/Typography";
import { TextField, Button, Paper } from "@material-ui/core";
import UserDetail from "./UserDetail";
import {useDispatch, useSelector} from 'react-redux'

import uuid from 'uuid/v4'
import {addinfoAction} from '../redux'



function Form() {
  const [firstName, lastName, birthday, age, hobby, setInfo] = useState('')
  const info = useSelector(state => state.info)
  const dispatch = useDispatch()
  const addInfo = (info) => dispatch(addinfoAction)
    
    const handleChange = (e) => {
      setInfo(e.target.value)
    }

    const handleSubmit = (e) => {
      e.preventDefault()
      if(firstName.trim() ===  '' || lastName.trim() ===  '' || birthday.trim() ===  '' || age.trim() ===  '' || hobby.trim() ===  '') return;
      
      addInfo({
        id : uuid(),
        firstName: firstName,
        lastName: lastName,
        birthday: birthday,
        age: age,
        hobby: hobby
         
      })
    }
    const userTable = info.map(user => <UserDetail key={user.id} firstName={user.firstName} lastName={user.lastName} birthday={user.birthday} age={user.age} hobby={user.hobby}/>)
    return (
      <Grid container className='form'>
        <Grid item sm >
          <div className='over'>
            <Paper className='paper'>
              <Typography variant='h5'>Added UserDetails</Typography>
              {userTable}
            </Paper>
          </div>
          
        </Grid>
        <Grid item sm>
          <Typography variant="h4" className='pageTitle'>
            enyeForm
          </Typography>
          <form >
            <TextField
              id="firstName"
              name="firstName"
              label="First Name"
              className='textField'
              value={info.firstName}
              onChange={handleChange}
            />
            <TextField
              id="lastName"
              name="lastName"
              label="Last Name"
              className='textField'
              value={info.lastName}
              onChange={handleChange}
            />
              <TextField
              id="date"
              name="birthday"
              onChange={handleChange}
              label="Birthday"
              type="date"
              defaultValue={Date.now().toISOString}
              className='textField'
              InputLabelProps={{
                shrink: true,
              }}
            />
            <TextField
              id="age"
              name="age"
              label="Age"
              className='textField'
              value={info.age}
              onChange={handleChange}
            />
            <TextField
              id="hobby"
              name="hobby"
              label="Hobby"
              className='textField'
              value={info.hobby}
              onChange={handleChange}
            />
            
            <Button
              variant="contained"
              color="primary"
              onClick={handleSubmit}
              className='textField'
            >
              Submit UserDetails
            </Button>
            <br />
          </form>
        </Grid>
      </Grid>
    );
  }

  export default Form